<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Safety Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="m-0 h-screen font-sans">
  <div class="absolute top-4 left-1/2 -translate-x-1/2 z-[1000] bg-white p-4 rounded-lg shadow-lg flex gap-2 flex-wrap max-w-md w-full">
    <input
      type="text"
      id="searchInput"
      list="suggestions"
      placeholder="Search location..."
      class="flex-grow p-2 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      oninput="getSuggestions(this.value)"
    >
    <datalist id="suggestions"></datalist>
    <button
      onclick="getCurrentLocation()"
      class="p-2 text-sm bg-white-500 text-white rounded-md hover:bg-blue-600"
    >
      üìç
    </button>
    <button
      onclick="searchLocation()"
      class="p-2 text-sm bg-white-500 text-white rounded-md hover:bg-blue-600"
    >
      üîç
    </button>
    <input list="suggestions" id="searchInput" oninput="getSuggestions(this.value)">
<datalist id="suggestions"></datalist>
<div id="loadingIndicator" style="display: none; font-size: 14px; color: gray;">Loading...</div>
<div id="loadingIndicator" style="display:none;">
  <span class="loader"></span> Loading...
</div>

<style>
  .loader {
    border: 2px solid #f3f3f3;
    border-top: 2px solid #3498db;
    border-radius: 50%;
    width: 14px;
    height: 14px;
    animation: spin 0.8s linear infinite;
    display: inline-block;
    margin-right: 5px;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

  </div>
  <div id="map" class="h-full w-full"></div>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
  <script defer>
    const { createClient } = supabase;
    const _supabase = createClient(
      'https://vsmvkwawpnwkftfgnjma.supabase.co',
      'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzbXZrd2F3cG53a2Z0Zmduam1hIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDUxMTgwODQsImV4cCI6MjA2MDY5NDA4NH0.Ei9X5KWA76GESSHEiTprvJQLWkEhlwfIyrq3jC-NmcA'
    );
  </script>
  <script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet.heat/dist/leaflet-heat.js"></script>
  <script src="map.js"></script>
  <script src="search.js"></script>
</body>
</html>
